<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Prashamsa | Jan 6th</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Cinzel:wght@700&family=Montserrat:wght@200;400&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2d004d;
            --accent: #d4af37;
            --glow: #bc13fe;
            --heart: #ff3860;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }

        body {
            background: #05000a;
            color: white;
            font-family: 'Montserrat', sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 2000px; /* Enhanced 3D depth */
        }

        /* --- Magical Background --- */
        .nebula {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at 50% 50%, #1a0033 0%, #05000d 100%);
            z-index: -2;
            transition: transform 0.6s ease-out;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0;
            animation: twinkle var(--d) infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .petal {
            position: fixed;
            top: -10%;
            z-index: 5;
            pointer-events: none;
            animation: fall var(--speed) linear infinite;
        }

        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg) translateX(0); }
            100% { transform: translateY(110vh) rotate(360deg) translateX(50px); }
        }

        /* --- Entrance Screen --- */
        #unlock-screen {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .unlock-btn {
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            padding: 20px 50px;
            font-family: 'Cinzel', serif;
            letter-spacing: 5px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.5s;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.2);
        }

        .unlock-btn:hover {
            background: var(--accent);
            color: #000;
            box-shadow: 0 0 50px var(--accent);
            transform: scale(1.1);
        }

        /* --- Photo Gallery --- */
        .world-container {
            display: none;
            width: 100%;
            height: 100%;
            position: relative;
            opacity: 0;
            transition: opacity 2s ease;
        }

        .jan-date {
            position: absolute;
            top: 5%;
            width: 100%;
            text-align: center;
            font-family: 'Cinzel', serif;
            font-size: 2.8rem;
            background: linear-gradient(to right, #fff, var(--accent), #fff);
            background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 15px;
            z-index: 10;
        }

        /* The Heart Pulsing Wrapper */
        .heart-wrapper {
            position: absolute;
            top: 45%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            height: 400px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .pulse-animation {
            animation: heartBeat 2s infinite cubic-bezier(0.4, 0, 0.6, 1);
        }

        @keyframes heartBeat {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            10% { transform: translate(-50%, -50%) scale(1.08); }
            20% { transform: translate(-50%, -50%) scale(1); }
            30% { transform: translate(-50%, -50%) scale(1.05); }
        }

        .photo-frame {
            position: absolute;
            width: 120px;
            height: 150px;
            border: 4px solid #fff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
            transition: all 2.5s cubic-bezier(0.25, 1, 0.5, 1); /* Smooth Glide */
            opacity: 0;
            transform: translate3d(0, 800px, 0); /* Entrance from bottom */
        }

        .photo-frame img { width: 100%; height: 100%; object-fit: cover; }

        /* --- Cake Section --- */
        .cake-box {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%) scale(0);
            width: 200px;
            height: 180px;
            cursor: pointer;
            z-index: 20;
            transition: 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .tier {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #2d004d, #4d0080);
            border: 1px solid var(--accent);
            border-radius: 8px 8px 2px 2px;
        }
        .tier-1 { bottom: 0; width: 150px; height: 40px; }
        .tier-2 { bottom: 40px; width: 110px; height: 35px; }
        .tier-3 { bottom: 75px; width: 70px; height: 30px; }
        .candle { width: 6px; height: 20px; background: gold; position: absolute; top: -20px; left: 50%; transform: translateX(-50%); }
        .flame {
            width: 12px; height: 18px; background: radial-gradient(#fff, #ff0, #f00);
            border-radius: 50%; position: absolute; top: -15px; left: 50%;
            transform: translateX(-50%); box-shadow: 0 0 20px #ff0; display: none;
            animation: flicker 0.1s infinite alternate;
        }

        /* --- Message Card --- */
        .glass-card {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            width: 90%;
            max-width: 480px;
            max-height: 80vh;
            background: rgba(15, 0, 30, 0.95);
            backdrop-filter: blur(20px);
            padding: 40px;
            border-radius: 30px;
            border: 1px solid var(--accent);
            z-index: 1000;
            display: none;
            opacity: 0;
            transition: all 0.8s ease;
            overflow-y: auto;
        }

        .msg-text {
            font-family: 'Dancing Script', cursive;
            font-size: 1.5rem;
            color: #f5e6ff;
            line-height: 1.8;
            text-align: center;
        }

        @keyframes flicker { to { opacity: 0.7; transform: translateX(-50%) scale(1.1); } }

        @media (max-width: 600px) {
            .photo-frame { width: 85px; height: 110px; }
            .jan-date { font-size: 1.6rem; letter-spacing: 8px; }
        }
    </style>
</head>
<body>

    <div id="unlock-screen">
        <h2 style="font-family: 'Cinzel'; margin-bottom: 30px; font-weight: 200; color: var(--accent); letter-spacing: 5px;">FOR PRASHAMSA</h2>
        <button class="unlock-btn" onclick="openMagic()">OPEN YOUR WORLD</button>
    </div>

    <div class="nebula" id="nebula"></div>

    <audio id="bgm" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <div class="world-container" id="world">
        <div class="jan-date">JANUARY 06</div>

        <!-- This wrapper will handle the Heart shape and the Pulse -->
        <div class="heart-wrapper" id="heart-box">
            <div class="photo-frame" id="p1"><img src="img1.jpg"></div>
            <div class="photo-frame" id="p2"><img src="img2.jpg"></div>
            <div class="photo-frame" id="p3"><img src="img3.jpg"></div>
            <div class="photo-frame" id="p4"><img src="img4.jpg"></div>
            <div class="photo-frame" id="p5"><img src="img5.jpg"></div>
            <div class="photo-frame" id="p6"><img src="img6.jpg"></div>
        </div>

        <div class="cake-box" id="cake" onclick="igniteCake()">
            <div class="tier tier-1"></div>
            <div class="tier tier-2"></div>
            <div class="tier tier-3">
                <div class="candle"><div class="flame" id="flame"></div></div>
            </div>
            <p id="hint" style="position:absolute; bottom: -40px; width:100%; text-align:center; font-size: 12px; color: var(--accent); font-weight: bold;">TAP TO LIGHT</p>
        </div>
    </div>

    <div class="glass-card" id="card">
        <div class="msg-text" id="typewriter"></div>
        <div style="text-align: center; margin-top: 30px;">
            <button onclick="closeCard()" style="background:transparent; border:1px solid var(--accent); color:var(--accent); padding:10px 30px; border-radius:30px; cursor:pointer;">CLOSE ‚ù§Ô∏è</button>
        </div>
    </div>

    <script>
        function initStars() {
            const nebula = document.getElementById('nebula');
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 2 + 1 + 'px';
                star.style.width = size;
                star.style.height = size;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.setProperty('--d', (Math.random() * 3 + 2) + 's');
                nebula.appendChild(star);
            }
        }

        function createPetals() {
            const symbols = ['üå∏', '‚ú®', 'üíñ', 'üíú', 'üíé', 'üíò'];
            setInterval(() => {
                let p = document.createElement('div');
                p.className = 'petal';
                p.innerHTML = symbols[Math.floor(Math.random() * symbols.length)];
                p.style.left = Math.random() * 100 + 'vw';
                p.style.setProperty('--speed', (Math.random() * 5 + 5) + 's');
                p.style.fontSize = Math.random() * 20 + 10 + 'px';
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 8000);
            }, 400);
        }

        function openMagic() {
            document.getElementById('bgm').play();
            document.getElementById('unlock-screen').style.opacity = '0';
            
            setTimeout(() => {
                document.getElementById('unlock-screen').style.display = 'none';
                const world = document.getElementById('world');
                world.style.display = 'block';
                setTimeout(() => world.style.opacity = '1', 100);
                initStars();
                createPetals();
                arrangeHeart();
            }, 1000);
        }

        function arrangeHeart() {
            const frames = document.querySelectorAll('.photo-frame');
            
            // Phase 1: Scattered Entrance
            frames.forEach((frame, i) => {
                setTimeout(() => {
                    frame.style.opacity = '1';
                    const rx = (Math.random() - 0.5) * 400;
                    const ry = (Math.random() - 0.5) * 400;
                    const rr = (Math.random() - 0.5) * 60;
                    frame.style.transform = `translate3d(${rx}px, ${ry}px, 0) rotate(${rr}deg)`;
                }, i * 150);
            });

            // Phase 2: Form the PERFECT Heart
            setTimeout(() => {
                // Precise math coordinates for 6 images forming a Heart shape
                const coords = [
                    { x: -75,  y: -110, r: -15 }, // Top Left Lobe
                    { x: 75,   y: -110, r: 15 },  // Top Right Lobe
                    { x: -130, y: -10,  r: -25 }, // Mid Left Wide
                    { x: 130,  y: -10,  r: 25 },  // Mid Right Wide
                    { x: -65,  y: 110,  r: -35 }, // Bottom Left Point Side
                    { x: 65,   y: 110,  r: 35 }   // Bottom Right Point Side
                ];

                frames.forEach((frame, i) => {
                    frame.style.transform = `translate3d(${coords[i].x}px, ${coords[i].y}px, 0) rotate(${coords[i].r}deg)`;
                    frame.style.boxShadow = "0 0 40px var(--glow)";
                    frame.style.borderColor = "var(--accent)";
                });

                // Start the Pulse once the heart is in position
                setTimeout(() => {
                    document.getElementById('heart-box').classList.add('pulse-animation');
                    document.getElementById('cake').style.transform = 'translateX(-50%) scale(1)';
                }, 2500);

            }, 2500);
        }

        function igniteCake() {
            document.getElementById('flame').style.display = 'block';
            document.getElementById('hint').style.display = 'none';
            
            // Magical explosion
            for(let i=0; i<100; i++) {
                const s = document.createElement('div');
                s.innerHTML = ['‚ú®','üíñ','‚≠ê'][Math.floor(Math.random()*3)];
                s.style.position = 'fixed';
                s.style.left = '50%'; s.style.top = '80%';
                s.style.color = 'var(--accent)';
                s.style.pointerEvents = 'none';
                document.body.appendChild(s);
                
                const angle = Math.random() * Math.PI * 2;
                const dist = Math.random() * 1200;
                s.animate([
                    { transform: 'translate(0,0) scale(1)', opacity: 1 },
                    { transform: `translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px) scale(0)`, opacity: 0 }
                ], { duration: 3000, easing: 'ease-out' }).onfinish = () => s.remove();
            }

            setTimeout(() => {
                const card = document.getElementById('card');
                card.style.display = 'block';
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translate(-50%, -50%) scale(1)';
                    typeMsg();
                }, 100);
            }, 1200);
        }

        function typeMsg() {
            const text = "Happy Birthday, my Prashamsa baby üíñ\n\nI love you so, so much.\nYou are my world, my smile, my peace, and my happiness.\nMy love for you is infinite, endless, and will never stop.\n\nEven though we are miles apart, my heart is always with you, holding you tight ü§ç\nSending you lots of love, warm hugs, and sweet kisses from far away.\n\nAlways yours, today and forever üíï\nI love you, Prashamsa baby ü•∞";
            let i = 0;
            const target = document.getElementById('typewriter');
            if (target.innerHTML !== "") return;
            
            function typing() {
                if(i < text.length) {
                    target.innerHTML += text.charAt(i) === "\n" ? "<br>" : text.charAt(i);
                    i++;
                    document.getElementById('card').scrollTop = document.getElementById('card').scrollHeight;
                    setTimeout(typing, 45);
                }
            }
            typing();
        }

        function closeCard() {
            const card = document.getElementById('card');
            card.style.opacity = '0';
            card.style.transform = 'translate(-50%, -50%) scale(0.8)';
            setTimeout(() => card.style.display = 'none', 800);
        }

        // Mouse Parallax effect
        document.addEventListener('mousemove', (e) => {
            const x = (window.innerWidth / 2 - e.pageX) / 50;
            const y = (window.innerHeight / 2 - e.pageY) / 50;
            document.getElementById('nebula').style.transform = `translate(${x}px, ${y}px) scale(1.1)`;
        });
    </script>
</body>
</html>